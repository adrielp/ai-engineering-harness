# AI Engineering Harness

> **For AI Agents**: This document provides structured reference data for AI coding assistants. For human-readable documentation, see [README.md](README.md).

## Quick Reference

**Purpose**: Configuration harness for AI coding agents with reusable prompts, agents, and workflows.

**Supported Tools**: OpenCode, Claude Code, Gemini CLI

**Installation**: `./setup.sh <tool>` where tool is `opencode`, `claude`, `gemini`, or `all`

## Repository Structure

```
ai-engineering-harness/
├── opencode/           → ~/.config/opencode/
│   ├── agents/         # 6 agents (snake_case)
│   ├── commands/       # 8 slash commands
│   ├── skills/         # 4 auto-triggered skills
│   └── opencode.json   # MCP configuration
├── claude/             → ~/.claude/
│   ├── agents/         # 6 agents (snake_case)
│   ├── skills/         # 11 skills (8 manual + 3 auto)
│   ├── .mcp.json       # MCP configuration
│   └── settings.json   # Settings schema
├── gemini/             → ~/.gemini/
│   ├── agents/         # 6 agents (snake_case)
│   ├── commands/       # 11 commands (TOML format)
│   └── skills/         # 11 skills (8 manual + 3 auto)
└── thoughts/           # Context engineering artifacts
    ├── shared/tickets/ # Work items
    ├── shared/plans/   # Implementation plans
    ├── shared/research/# Research documents
    └── global/         # Cross-repo concerns
```

## Commands & Skills

| Command | OpenCode | Claude | Gemini | Type | Description |
|---------|:--------:|:------:|:------:|------|-------------|
| `/init_harness` | ✓ | ✓ | ✓ | Manual | Initialize harness (creates AGENTS.md/CLAUDE.md/GEMINI.md + thoughts/) |
| `/create_plan` | ✓ | ✓ | ✓ | Manual | Generate implementation plan from ticket |
| `/implement_plan` | ✓ | ✓ | ✓ | Manual | Execute approved plan phase-by-phase |
| `/validate_plan` | ✓ | ✓ | ✓ | Manual | Verify implementation against plan |
| `/commit` | ✓ | ✓ | ✓ | Manual | Create well-structured git commits |
| `/debug` | ✓ | ✓ | ✓ | Manual | Investigate issues during testing |
| `/debug_k8s` | ✓ | ✓ | ✓ | Manual | Debug Kubernetes (prefers MCP, falls back to kubectl) |
| `/research_codebase` | ✓ | ✓ | ✓ | Manual | Comprehensive codebase research |
| `git_commit_helper` | ✓ | ✓ | ✓ | Auto | Triggers on "commit" keywords |
| `pr_description_generator` | ✓ | ✓ | ✓ | Auto | Triggers when creating PRs |
| `experimental_pr_workflow` | ✓ | ✓ | ✓ | Auto | Formalizes experimental work |

**Naming**: All tools now use `/init_harness` (snake_case) for consistency.

## Agents

All agents are identical across all three tools:

| Agent | OpenCode | Claude | Gemini | Purpose |
|-------|:--------:|:------:|:------:|---------|
| `codebase_analyzer` | ✓ | ✓ | ✓ | Analyze implementation details, trace data flow |
| `codebase_locator` | ✓ | ✓ | ✓ | Find files/directories by feature or task |
| `codebase_pattern_finder` | ✓ | ✓ | ✓ | Discover similar implementations and patterns |
| `thoughts_analyzer` | ✓ | ✓ | ✓ | Extract insights from research documents |
| `thoughts_locator` | ✓ | ✓ | ✓ | Discover documents in thoughts/ directory |
| `web_search_researcher` | ✓ | ✓ | ✓ | Research information from web sources |

## Workflow

```
Ticket → /create_plan → /implement_plan → /validate_plan → /commit
```

1. Create ticket in `thoughts/shared/tickets/` (use ticket-template.md)
2. Run `/create_plan <ticket-path>` to generate plan
3. Run `/implement_plan <plan-path>` to execute
4. Run `/validate_plan` to verify
5. Run `/commit` to commit changes

## MCP Configuration

| Tool | File | Disable Syntax |
|------|------|----------------|
| OpenCode | `opencode.json` | `"enabled": false` |
| Claude Code | `.mcp.json` | `"disabled": true` |
| Gemini CLI | TBD | TBD |

Available MCP servers: `kubernetes` (disabled by default)

## Tool-Specific Notes

### OpenCode
- Project memory: `AGENTS.md` (generated by `/init`)
- Commands and skills are separate directories
- Agent naming: Uses snake_case convention
- Config location: `~/.config/opencode/`

### Claude Code
- Project memory: `CLAUDE.md` (generated by `/init`)
- Commands implemented as skills with `disable-model-invocation: true`
- Agent naming: Uses snake_case convention
- Config location: `~/.claude/`
- Supports `.claude/rules/` for modular instructions

### Gemini CLI
- Project memory: `GEMINI.md` (generated by `/init`)
- Commands/skills: TOML format in `commands/` and `skills/`
- Agent naming: Uses snake_case convention
- Config location: `~/.gemini/`
