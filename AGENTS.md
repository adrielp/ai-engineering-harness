# AI Engineering Harness

> **For AI Agents**: This document provides structured reference data for AI coding assistants. For human-readable documentation, see [README.md](README.md).

## Quick Reference

**Purpose**: Configuration harness for AI coding agents with reusable prompts, agents, and workflows.

**Supported Tools**: OpenCode, Claude Code (Cursor planned)

**Installation**: `./setup.sh <tool>` where tool is `opencode`, `claude`, or `all`

## Repository Structure

```
ai-engineering-harness/
├── opencode/           → ~/.config/opencode/
│   ├── agents/         # 6 subagents
│   ├── commands/       # 8 slash commands
│   ├── skills/         # 4 auto-triggered skills
│   └── opencode.json   # MCP configuration
├── claude/             → ~/.claude/
│   ├── agents/         # 6 subagents
│   ├── skills/         # 11 skills (8 manual + 3 auto)
│   ├── .mcp.json       # MCP configuration
│   └── settings.json   # Settings schema
└── thoughts/           # Context engineering artifacts
    ├── shared/tickets/ # Work items
    ├── shared/plans/   # Implementation plans
    ├── shared/research/# Research documents
    └── global/         # Cross-repo concerns
```

## Commands & Skills

| Command | Type | Description |
|---------|------|-------------|
| `/init_harness` | Manual | Initialize harness (creates AGENTS.md/CLAUDE.md + thoughts/) |
| `/create_plan` | Manual | Generate implementation plan from ticket |
| `/implement_plan` | Manual | Execute approved plan phase-by-phase |
| `/validate_plan` | Manual | Verify implementation against plan |
| `/commit` | Manual | Create well-structured git commits |
| `/debug` | Manual | Investigate issues during testing |
| `/debug-k8s` | Manual | Debug Kubernetes (prefers MCP, falls back to kubectl) |
| `/research_codebase` | Manual | Comprehensive codebase research |
| `git-commit-helper` | Auto | Triggers on "commit" keywords |
| `pr-description-generator` | Auto | Triggers when creating PRs |
| `experimental-pr-workflow` | Auto | Formalizes experimental work |

**Naming**: OpenCode uses `/init-harness` (kebab-case), Claude Code uses `/init_harness` (snake_case).

## Agents

All agents are identical across both tools:

| Agent | Purpose |
|-------|---------|
| `codebase-analyzer` | Analyze implementation details, trace data flow |
| `codebase-locator` | Find files/directories by feature or task |
| `codebase-pattern-finder` | Discover similar implementations and patterns |
| `thoughts-analyzer` | Extract insights from research documents |
| `thoughts-locator` | Discover documents in thoughts/ directory |
| `web-search-researcher` | Research information from web sources |

## Workflow

```
Ticket → /create_plan → /implement_plan → /validate_plan → /commit
```

1. Create ticket in `thoughts/shared/tickets/` (use ticket-template.md)
2. Run `/create_plan <ticket-path>` to generate plan
3. Run `/implement_plan <plan-path>` to execute
4. Run `/validate_plan` to verify
5. Run `/commit` to commit changes

## MCP Configuration

| Tool | File | Disable Syntax |
|------|------|----------------|
| OpenCode | `opencode.json` | `"enabled": false` |
| Claude Code | `.mcp.json` | `"disabled": true` |

Available MCP servers: `kubernetes` (disabled by default in both)

## Tool-Specific Notes

### OpenCode
- Project memory: `AGENTS.md` (generated by `/init`)
- Commands and skills are separate directories
- Config location: `~/.config/opencode/`

### Claude Code
- Project memory: `CLAUDE.md` (generated by `/init`)
- Commands implemented as skills with `disable-model-invocation: true`
- Config location: `~/.claude/`
- Supports `.claude/rules/` for modular instructions
